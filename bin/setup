#!/usr/bin/env sh

# Set up Jekyll site. Run this script immediately after cloning the codebase.
# https://github.com/thoughtbot/guides/tree/master/protocol

# Exit if any subcommand fails
set -e

# Set up Ruby dependencies via Bundler.

SSH_ENV="$HOME/.ssh/environment"

function start_agent {
	echo "Initialize new SSH agent..."
	/usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
	echo succeeded
	chmod 600 "${SSH_ENV}"
	. "${SSH_ENV}" > /dev/null
	/usr/bin/ssh-add;
}

start_agent;


gem install bundler --conservative
bundle check || bundle install
bundle update

# Set up JS dependencies via Bower.
npm i -g bower
bower install
